services:
  - type: web
    name: taleos-connection-tester
    env: python
    region: frankfurt
    plan: free
    buildCommand: |
      pip install --upgrade pip
      pip install -r requirements.txt
      playwright install chromium
      # Vérifier que l'installation a réussi
      python -c "from playwright.sync_api import sync_playwright; p = sync_playwright().start(); p.chromium.executable_path; print('✅ Playwright installé correctement')" || echo "⚠️ Vérification Playwright échouée"
    startCommand: gunicorn app:app --bind 0.0.0.0:$PORT --workers 1 --threads 2 --timeout 120
